<div class="container my-5">
  <div class="row justify-content-center">
    <div class="col-md-10">
      <div class="card shadow rounded-4">
        <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
          <h2 class="h4 mb-0">Panel Admin - <%= @event.title %></h2>
          <% if user_signed_in? && current_user == @event.admin %>
            <div class="d-flex gap-2">
              <%= link_to "Modifier", edit_event_path(@event), class: "btn btn-warning btn-sm" %>
              <%= link_to "Supprimer", event_path(@event), data: { turbo_method: :delete, turbo_confirm: "Êtes-vous sûr ?" }, class: "btn btn-danger btn-sm" %>
            </div>
          <% end %>
        </div>

        <div class="card-body">
          <% if @attendances.any? %>
            <table class="table table-striped">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Participant</th>
                  <th>Email</th>
                  <th>Inscrit le</th>
                </tr>
              </thead>
              <tbody>
                <% @attendances.each_with_index do |attendance, index| %>
                  <tr>
                    <td><%= index + 1 %></td>
                    <td><%= attendance.user.first_name || "Nom non renseigné" %></td>
                    <td><%= attendance.user.email %></td>
                    <td><%= attendance.created_at.strftime("%d %B %Y") %></td>
                  </tr>
                <% end %>
              </tbody>
            </table>
          <% else %>
            <p class="text-muted">Aucun participant pour le moment.</p>
          <% end %>
        </div>

        <div class="card-footer text-end">
          <%= link_to "Retour à l'événement", event_path(@event), class: "btn btn-outline-secondary" %>
        </div>
      </div>
    </div>
  </div>
</div>