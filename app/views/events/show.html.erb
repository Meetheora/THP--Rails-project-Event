<div class="container my-5">
  <div class="row justify-content-center">
    <div class="col-lg-10">
      <div class="card shadow-lg rounded-4 border-0">
        
        <div class="card-header bg-primary text-white text-center rounded-top-4">
          <h2 class="h4 mb-0"><%= @event.title %></h2>
        </div>

        <div class="card-body p-4">
          
          <div class="row g-4 align-items-start">
            
            <% if @event.photo.attached? %>
              <div class="col-md-5 text-center">
                <%= image_tag @event.photo,
                    class: "img-fluid rounded-4 shadow-sm w-100",
                    style: "object-fit: cover; max-height: 350px;" %>
              </div>
            <% end %>

            <div class="<%= @event.photo.attached? ? 'col-md-7' : 'col-12' %>">
              
              <p class="text-muted mb-2">
                <strong>Date :</strong>
                <%= @event.start_date.strftime("%d %B %Y à %H:%M") %>
              </p>

              <p class="text-muted mb-2">
                <strong>Durée :</strong>
                <%= @event.duration %> minutes
              </p>

              <p class="text-muted mb-2">
                <strong>Lieu :</strong>
                <%= @event.location %>
              </p>

              <p class="text-primary fw-bold fs-5 mb-3">
                <strong>Prix :</strong>
                <%= @event.price || 0 %> €
              </p>

              <hr>

              <h5 class="mt-3">Description</h5>
              <p><%= simple_format(@event.description) %></p>

              <div class="d-flex align-items-center mt-4">
                <span class="badge bg-primary me-2">Organisateur</span>
                <strong><%= @event.admin.email %></strong>
              </div>

            </div>
          </div>

          <div class="d-flex justify-content-between align-items-center mt-5 flex-wrap gap-2">
            
            <%= link_to "Retour aux événements",
                root_path,
                class: "btn btn-outline-secondary" %>

            <div class="d-flex gap-2">
              <% if user_signed_in? && current_user != @event.admin && !@event.participants.include?(current_user) %>
                <%= link_to "Rejoindre l'évènement",
                    new_event_attendance_path(@event),
                    data: { turbo: false },
                    class: "btn btn-success" %>
              <% end %>

              <% if user_signed_in? && current_user == @event.admin %>
                <%= link_to "Espace Admin",
                    event_attendances_path(@event),
                    class: "btn btn-warning" %>
              <% end %>
            </div>

          </div>

        </div>
      </div>
    </div>
  </div>
</div>