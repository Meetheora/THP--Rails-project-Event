<!-- app/views/admin/event_submissions/index.html.erb -->

<div class="container my-5">
  <h2 class="mb-4">Événements en attente de validation</h2>

  <% if @event_to_validate.any? %>
    <div class="table-responsive">
      <table class="table table-hover align-middle">
        <thead class="table-light">
          <tr>
            <th>Titre</th>
            <th>Créateur</th>
            <th>Date</th>
            <th class="text-end">Actions</th>
          </tr>
        </thead>
        <tbody>
          <% @event_to_validate.each do |event| %>
            <tr>
              <td class="fw-semibold"><%= event.title %></td>
              <td><%= event.admin.email %></td>
              <td><%= l(event.start_date, format: :long) %></td>
              <td class="text-end d-flex justify-content-end gap-2">
                <%= link_to "Voir", admin_event_submission_path(event), class: "btn btn-sm btn-outline-primary" %>
                <%= link_to "Valider", admin_event_submission_path(event, event: { validated: true }), method: :patch, data: { confirm: "Valider cet événement ?" }, class: "btn btn-sm btn-success" %>
                <%= link_to "Refuser", admin_event_submission_path(event, event: { validated: false }), method: :patch, data: { confirm: "Refuser cet événement ?" }, class: "btn btn-sm btn-danger" %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  <% else %>
    <div class="alert alert-info">
      Aucun événement en attente de validation.
    </div>
  <% end %>
</div>